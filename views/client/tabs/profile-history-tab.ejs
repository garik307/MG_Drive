<div class="tab-pane fade" id="history" role="tabpanel" aria-labelledby="history-tab">
    <div class="card p-4">
        <h5 class="section-title">Թեստերի Ամբողջական Պատմություն</h5>
        <div class="table-responsive history-table-container">
            <table class="table table-hover align-middle">
                <thead class="bg-light sticky-top">
                    <tr>
                        <th class="border-0 rounded-start">Թեստ</th>
                        <th class="border-0">Ամսաթիվ</th>
                        <th class="border-0 text-center">Ճիշտ</th>
                        <th class="border-0 text-center">Սխալ</th>
                        <th class="border-0">Կարգավիճակ</th>
                        <th class="border-0 rounded-end text-end">Արդյունք</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (testResults && testResults.length > 0) { %>
                    <% testResults.forEach(result => { %>
                    <tr>
                        <td class="fw-semibold rounded-3">
                            <div class="d-flex align-items-center">
                                <div class="icon-box bg-light text-center text-primary me-3 df-center align-items-center justify-content-center w-25 h-25 p-3 rounded-3">
                                    <i class="fa-solid fa-file-lines"></i>
                                </div>
                                <div>
                                    <div>Թեստ №<%= result.test ? result.test.number : 'N/A' %></div>
                                    <div class="small text-muted">Test #<%= result.test ? result.test.number : 'N/A' %></div>
                                </div>
                            </div>
                        </td>
                        <td class="text-secondary">
                            <%= new Date(result.createdAt).toLocaleDateString('hy-AM') %></td>
                        <td class="text-center text-success fw-bold">
                            <%= result.correct_count || 0 %>
                        </td>
                        <td class="text-center text-danger fw-bold">
                            <%= result.wrong_count || 0 %>
                        </td>
                        <td>
                            <span
                                class="badge <%= result.status === 'passed' ? 'bg-success' : 'bg-danger' %> bg-opacity-10 text-<%= result.status === 'passed' ? 'success' : 'danger' %> px-3 py-2 rounded-pill">
                                <%= result.status === 'passed' ? 'Հանձնված' : 'Ձախողված' %>
                            </span>
                        </td>
                        <td class="text-end fw-bold"><%= result.score %>%</td>
                    </tr>
                    <% }); %>
                    <% } else { %>
                    <tr>
                        <td colspan="6" class="text-center text-muted">Տվյալներ չկան</td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>
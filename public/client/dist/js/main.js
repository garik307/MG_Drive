"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return _regeneratorDefine2(l,"_invoke",function(n,r,o){var a,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,s=0,c=e,f.n=n,i}};function m(n,r){for(s=n,c=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,a=u[t],m=f.p,p=a[2];n>3?(o=p===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(s=0,f.v=r,f.n=a[1]):m<p&&(o=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,s=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),s=u,c=p;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),m(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==i)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,o,a),!0),l}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(_regeneratorDefine2(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,_regeneratorDefine2(d,"constructor",l),_regeneratorDefine2(l,"constructor",c),c.displayName="GeneratorFunction",_regeneratorDefine2(l,o,"GeneratorFunction"),_regeneratorDefine2(d),_regeneratorDefine2(d,o,"Generator"),_regeneratorDefine2(d,r,function(){return this}),_regeneratorDefine2(d,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:a,m:f}})()}function _regeneratorDefine2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_regeneratorDefine2=function(e,t,n,r){function a(t,n){_regeneratorDefine2(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},_regeneratorDefine2(e,t,n,r)}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,r,o,i,s,"next",e)}function s(e){asyncGeneratorStep(a,r,o,i,s,"throw",e)}i(void 0)})}}function mouseHover(){var e=document.querySelectorAll(".mouseOverLight");e&&e.forEach(function(e){var t=document.createElement("div");t.classList.add("shadow");var n=e.parentNode;n.style.position="relative",n.appendChild(t),n.addEventListener("mousemove",function(e){var r=n.getBoundingClientRect(),o=e.clientX-r.left,a=e.clientY-r.top;t.style.opacity="1",t.style.top="".concat(a,"px"),t.style.left="".concat(o,"px"),t.animate({left:"".concat(o,"px"),top:"".concat(a,"px")},{duration:500,fill:"forwards"})}),n.addEventListener("mouseleave",function(){t.style.opacity="0"})})}function scrollAnimation(){var e={threshold:Array.from({length:101},function(e,t){return t/100})},t=new IntersectionObserver(function(e,t){e.forEach(function(e){var t=e.target;e.intersectionRatio>0?(t.style.transition="transform 0.3s ease-out, opacity 0.3s ease-in-out",t.style.transform="translateY(".concat(100*(1-e.intersectionRatio),"px)"),t.style.opacity=e.intersectionRatio):(t.style.transform="translateY(100px)",t.style.opacity="0")})},e);document.querySelectorAll(".scroll_animate").forEach(function(e){t.observe(e)})}function scrolling(){window.addEventListener("scroll",function(){var e=document.querySelector(".goToTopIcon");if(e){var t=document.querySelector(".go_to_top"),n=document.querySelector("header"),r=e.parentElement;window.scrollY>800?(t.classList.add("active"),r.href="#home",n.style.paddingTop="0",e.innerHTML='<i class="fa-solid fa-arrow-up"></i>'):(t.classList.remove("active"),n.style.paddingTop="15px",r.href="#about_me",e.innerHTML='<i class="fa-solid fa-arrow-down"></i>')}})}if(mouseHover(),scrolling(),scrollAnimation(),!window.__clientAppInitialized){var handleNavbar=function(){document.querySelectorAll(".nav_link").forEach(function(e){e.addEventListener("click",function(){return body.classList.remove("nav-open")})}),body.addEventListener("click",function(e){e.target.classList.contains("mobile-overlay")&&body.classList.remove("nav-open")})},inputField=function(){var e=document.querySelectorAll(".input_field");function t(e,t){var n=""!==e.value.trim();null!==e&&null!==t&&(n?t.classList.add("active"):t.classList.remove("active"))}e.forEach(function(e){var n=e.querySelector("input"),r=e.querySelector("span");t(n,r),n.addEventListener("input",function(){return t(n,r)})})},updateOnScroll=function(){var e=window.scrollY;if(nav&&(e>700?nav.classList.add("sticky"):nav.classList.remove("sticky")),progress||backToTop){var t=e/(document.documentElement.scrollHeight-window.innerHeight)*100;backToTop&&(e>700?backToTop.classList.add("active"):backToTop.classList.remove("active"),Math.round(t)>60?backToTop.style.color="#fff":backToTop.style.color="var(--primary-color)"),progress&&(progress.style.width=t+"%"),navProgress&&(navProgress.style.width=t+"%")}ticking=!1},resetPassword=function(){var e=document.getElementById("resetPasswordForm"),t=document.getElementById("togglePassword"),n=document.getElementById("password");t.addEventListener("click",function(){var e="password"===n.getAttribute("type")?"text":"password";n.setAttribute("type",e),this.querySelector("i").classList.toggle("fa-eye"),this.querySelector("i").classList.toggle("fa-eye-slash")}),e.addEventListener("submit",function(){var t=_asyncToGenerator(_regenerator().m(function t(n){var r,o,a,i,s,c,l;return _regenerator().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),e.checkValidity()){t.n=1;break}return n.stopPropagation(),e.classList.add("was-validated"),t.a(2);case 1:if(r=document.getElementById("password").value,o=document.getElementById("passwordConfirm").value,r===o){t.n=2;break}return showNotification("Գաղտնաբառերը չեն համընկնում","error"),t.a(2);case 2:return t.p=2,a=e.querySelector('button[type="submit"]'),i=a.innerHTML,a.disabled=!0,a.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Կատարվում է...',t.n=3,doAxios("/api/v1/user/resetPassword/".concat("<%= token %>"),"POST",{password:r});case 3:(s=t.v).success?(showNotification("Գաղտնաբառը հաջողությամբ փոխվեց","success"),setTimeout(function(){window.location.href="/"},1500)):(showNotification(s.message||"Սխալ տեղի ունեցավ","error"),a.disabled=!1,a.innerHTML=i),t.n=5;break;case 4:t.p=4,l=t.v,console.error(l),showNotification("Սխալ տեղի ունեցավ","error"),(c=e.querySelector('button[type="submit"]')).disabled=!1,c.innerHTML="Պահպանել գաղտնաբառը";case 5:return t.a(2)}},t,null,[[2,4]])}));return function(e){return t.apply(this,arguments)}}())};window.__clientAppInitialized=!0;var backToTop=document.getElementById("backToTop"),progress=document.getElementById("progress"),navProgress=document.querySelector(".nav_progress"),nav=document.querySelector("nav"),body=document.querySelector("body"),ticking=!1;window.addEventListener("scroll",function(){ticking||(window.requestAnimationFrame(updateOnScroll),ticking=!0)}),backToTop&&backToTop.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("click",function(e){if(e.target.classList.contains("gender")){var t=e.target.closest("input");document.querySelectorAll("label").forEach(function(e){return e.style.border="1px solid #ddd"}),e.target.closest("label").style.border="1px solid #ccc",setTimeout(function(){t.checked?e.target.closest("label").style.border="1px solid #444cf7":e.target.closest("label").style.border="1px solid #ccc"},10)}}),Array.from(document.querySelectorAll("form")).forEach(function(e){"resetPasswordForm"===e.id||e.classList.contains("manual-submit")||e.addEventListener("submit",function(){var t=_asyncToGenerator(_regenerator().m(function t(n){var r,o,a,i,s,c,l,u,d,f,m,p,v,g,h;return _regenerator().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),validateBootstrap(e)){t.n=1;break}return showNotification("Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը","warning",3e3),t.a(2);case 1:return o=e.querySelector('button[type="submit"]'),a=new FormData(e),i=e.getAttribute("action"),s=null===(r=e.getAttribute("method"))||void 0===r?void 0:r.toLowerCase(),c=o.innerHTML,o.disabled=!0,o.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Խնդրում ենք սպասել...',setFormLoading(e,!0),l=2e3,t.p=2,u=a,"patch"!==s&&"post"!==s&&(u=Object.fromEntries(a.entries())),t.n=3,doAxios(i,s,u);case 3:if(!(null!=(d=t.v)&&d.error||(null==d?void 0:d.status)>=400)){t.n=4;break}showNotification(d.message||"Խնդրում ենք կրկին փորձել","warning",3e3),l=3e3,t.n=5;break;case 4:if(showNotification("Հաջողությամբ ստացվեց","success",2e3),p=(null==d||null===(f=d.data)||void 0===f?void 0:f.redirect)||e.getAttribute("data-redirect"),v=Boolean(null==d||null===(m=d.data)||void 0===m?void 0:m.reload)||"1"===e.getAttribute("data-reload"),p&&setTimeout(function(){return window.location.assign(p)},2e3),v&&setTimeout(function(){return window.location.reload()},2e3),!v||window.__allowReload){t.n=5;break}return window.__allowReload=!0,setTimeout(function(){return window.location.reload()},2e3),t.a(2);case 5:t.n=7;break;case 6:t.p=6,showNotification((null==(h=t.v)||null===(g=h.response)||void 0===g||null===(g=g.data)||void 0===g?void 0:g.message)||"Ցանցի սխալ","warning"),l=3e3;case 7:setTimeout(function(){setFormLoading(e,!1),o.disabled=!1,o.innerHTML=c},l);case 8:return t.a(2)}},t,null,[[2,6]])}));return function(e){return t.apply(this,arguments)}}())});var newsletterForms=document.querySelectorAll(".newsletter-form");newsletterForms.forEach(function(e){e.addEventListener("submit",function(){var t=_asyncToGenerator(_regenerator().m(function t(n){var r,o,a,i,s,c,l,u,d,f;return _regenerator().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),e.checkValidity()){t.n=1;break}return e.reportValidity(),t.a(2);case 1:return o=e.querySelector('button[type="submit"]'),a=new FormData(e),i=e.getAttribute("action"),s=(null===(r=e.getAttribute("method"))||void 0===r?void 0:r.toLowerCase())||"post",c=o.innerHTML,o.disabled=!0,o.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',setFormLoading(e,!0),t.p=2,l=a,"patch"!==s&&"post"!==s&&(l=Object.fromEntries(a.entries())),t.n=3,doAxios(i,s,l);case 3:null!=(u=t.v)&&u.error||(null==u?void 0:u.status)>=400?showNotification(u.message||"Խնդրում ենք կրկին փորձել","warning",3e3):(showNotification("Դուք հաջողությամբ բաժանորդագրվեցիք","success",3e3),e.reset()),t.n=5;break;case 4:t.p=4,showNotification((null==(f=t.v)||null===(d=f.response)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.message)||"Ցանցի սխալ","warning");case 5:setTimeout(function(){setFormLoading(e,!1),o.disabled=!1,o.innerHTML=c},1e3);case 6:return t.a(2)}},t,null,[[2,4]])}));return function(e){return t.apply(this,arguments)}}())}),handleNavbar(),inputField()}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-crop-wrapper]").forEach(function(e){var t=e.dataset.cropWrapper,n=e.querySelector("[data-crop-select]"),r=e.querySelector("input[type='file']"),o="".concat(t,"_modal"),a="".concat(t,"_img"),i='[data-crop-save="'.concat(t,'"]'),s=document.getElementById(o),c=new bootstrap.Modal(s,{keyboard:!0,backdrop:"static"}),l=document.getElementById(a),u=s.querySelector(i),d=s.querySelector('[data-crop-reselect="'.concat(t,'"]')),f=s.querySelector('[data-crop-delete="'.concat(t,'"]')),m=null,p=null,v=!1,g={aspectRatio:NaN,viewMode:2,dragMode:"move",background:!1,responsive:!0,checkOrientation:!1,toggleDragModeOnDblclick:!1,zoomOnWheel:!1,zoomOnTouch:!1,guides:!1,center:!1,highlight:!1,minContainerWidth:320,minContainerHeight:200,autoCropArea:.9};function h(){m&&(m.destroy(),m=null),m=new Cropper(l,g)}n.addEventListener("click",function(){return r.click()}),document.querySelectorAll('[data-crop-trigger="'.concat(t,'"]')).forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("src")||"",r=/no-image-profile\.jpg$/i.test(t),o=t;if(!o&&"IMG"!==e.tagName){var a=document.querySelector(".profile-img-lg");a&&(o=a.src)}o&&!r?(m&&(m.destroy(),m=null),p&&(URL.revokeObjectURL(p),p=null),l.src=o,l.style.maxHeight="70vh",l.style.maxWidth="100%",l.style.objectFit="contain",c.show()):n.click()})}),r.addEventListener("change",function(e){var t=e.target.files[0];t&&("1"!==r.dataset.cropped?(m&&(m.destroy(),m=null),p&&URL.revokeObjectURL(p),p=URL.createObjectURL(t),l.src=p,l.style.maxHeight="70vh",l.style.maxWidth="100%",l.style.objectFit="contain",s.classList.contains("show")?h():c.show()):delete r.dataset.cropped)}),d&&d.addEventListener("click",function(){return r.click()}),f&&f.addEventListener("click",_asyncToGenerator(_regenerator().m(function e(){var t,n,r,o;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,showConfirm({title:"Վստա՞հ եք",message:"Ջնջել պրոֆիլի նկարը",confirmText:"Այո, ջնջել",cancelText:"Չեղարկել",timeout:3e3});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.p=2,e.n=3,doAxios("/api/v1/user/avatar","delete");case 3:e.v,t=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);var r=Math.abs(t)%10;return"bg-".concat(r)},n=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var r="";if(!n){var o=document.querySelector(".profile-info h3");o&&(r=o.innerText.trim())}if(!r&&n){var a=e.closest("a");a&&a.dataset.bsTitle&&(r=a.dataset.bsTitle)}!r&&e.alt&&"Profile"!==e.alt&&(r=e.alt),r||(r="User");var i=r.charAt(0).toUpperCase(),s=t(r),c=document.createElement("div");n?(c.className="profime-sm-image border border-primary border-2 d-flex align-items-center justify-content-center text-white ".concat(s),c.innerHTML='<span style="font-size: 1.2rem; line-height: 1;">'.concat(i,"</span>")):(c.className="profile-img-lg d-flex align-items-center justify-content-center text-uppercase fw-bold placeholder-wrapper",c.innerHTML='<div class="profile-placeholder-img rounded-circle '.concat(s,'">').concat(i,"</div>")),e.replaceWith(c)}},r=document.querySelector(".profile-img-lg"),o=document.querySelector(".profime-sm-image"),r&&"IMG"===r.tagName&&n(r,!1),o&&"IMG"===o.tagName&&n(o,!0),showNotification("Նկարը ջնջվեց","success",3e3),setTimeout(function(){return window.location.reload()},1e3),e.n=5;break;case 4:return e.p=4,e.v,showNotification("Չհաջողվեց ջնջել նկարը","error",3e3),e.a(2);case 5:c.hide(),m&&(m.destroy(),m=null),l.src="",p&&(URL.revokeObjectURL(p),p=null);case 6:return e.a(2)}},e,null,[[2,4]])}))),s.addEventListener("shown.bs.modal",function(){requestAnimationFrame(function(){h()})}),s.addEventListener("hidden.bs.modal",function(){v||(m&&(m.destroy(),m=null),l.src="",p&&(URL.revokeObjectURL(p),p=null))}),u.addEventListener("click",function(){if(m){v=!0;var e=u.innerHTML;u.innerHTML='<i class="fa-solid fa-spinner fa-spin me-2"></i>Պահպանվում է...',u.disabled=!0,m.getCroppedCanvas({maxWidth:720,maxHeight:720}).toBlob(function(){var t=_asyncToGenerator(_regenerator().m(function t(n){var o,a,i,s,d,f,g;return _regenerator().w(function(t){for(;;)switch(t.p=t.n){case 0:return o=new FormData,a=r.name||"user_img",o.append(a,n,"user_img.jpg"),t.p=1,t.n=2,doAxios("/api/v1/user/updateme","PATCH",o);case 2:(i=t.v).success?(s=URL.createObjectURL(n),d=document.querySelector(".profile-img"),f=document.querySelector(".profile-img-lg"),g=document.querySelector(".profime-sm-image"),d&&(d.src=s),f&&(f.src=s),g&&(g.src=s),showNotification("Նկարը հաջողությամբ պահպանվեց","success",2e3),c.hide(),setTimeout(function(){return window.location.reload()},1e3)):showNotification(i.message||"Սխալ տեղի ունեցավ","error",3e3),t.n=4;break;case 3:t.p=3,t.v,showNotification("Սխալ տեղի ունեցավ","error",3e3);case 4:return t.p=4,u.innerHTML=e,u.disabled=!1,v=!1,m&&(m.destroy(),m=null),l.src="",p&&(URL.revokeObjectURL(p),p=null),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(e){return t.apply(this,arguments)}}(),"image/jpeg",.85)}})})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".gallery-item"),t=document.getElementById("loadMoreBtn"),n=document.getElementById("loadMoreText"),r=t?t.querySelector("i"):null,o=8,a=e.length;a<=8&&t&&(t.style.display="none"),t&&t.addEventListener("click",function(i){if(i.preventDefault(),"Փակել"===n.textContent.trim()){o=8,e.forEach(function(e,t){t>=o&&(e.classList.add("hidden-item"),e.classList.remove("fade-in"))}),n.textContent="Բեռնել ավելին",r&&(r.className="fas fa-chevron-down");var s=document.getElementById("gallery");s&&s.scrollIntoView({behavior:"smooth"})}else{n.textContent;n.textContent="Բեռնվում է...",t.classList.add("loading"),r&&(r.className="fas fa-spinner fa-spin"),t.disabled=!0,setTimeout(function(){for(var i=o+8,s=Math.min(i,a),c=o;c<s;c++)e[c]&&(e[c].classList.remove("hidden-item"),e[c].classList.add("fade-in"));o=s,t.disabled=!1,t.classList.remove("loading"),o>=a?(n.textContent="Փակել",r&&(r.className="fas fa-chevron-up")):(n.textContent="Բեռնել ավելին",r&&(r.className="fas fa-chevron-down"))},800)}})}),document.addEventListener("DOMContentLoaded",_asyncToGenerator(_regenerator().m(function e(){var t,n,r,o,a,i,s,c,l,u,d,f,m,p,v,g,h,y,w,b,L,E,T,k,_,x,S,I;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:if(I=function(){var e=Object.keys(r).length,t=Object.values(r).filter(function(e){return e.isCorrect}).length,a=Object.values(r).filter(function(e){return!e.isCorrect}).length+(o-e),s=o>0?Math.round(t/o*100):0,l=Math.floor((Date.now()-i)/1e3),u=Math.floor(l/60),d=l%60,f="".concat(u,"ր ").concat(d,"վ");c.correctCount&&(c.correctCount.innerText=t),c.wrongCount&&(c.wrongCount.innerText=a),c.scorePercent&&(c.scorePercent.innerText=s),c.timeSpentBadge&&(c.timeSpentBadge.innerText=f);var p=document.getElementById("scoreCircle");p&&(p.className="score-circle mb-4",s>=90?p.classList.add("high"):s>=50?p.classList.add("medium"):p.classList.add("low")),c.resultModal&&c.resultModal.show();var v={groupId:n.id,score:s,correct_count:t,wrong_count:a,time_spent:l,status:s>=90?"passed":"failed"};fetch("/api/v1/groups/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}).then(function(e){return e.json()}).then(function(e){m({})}).catch(function(e){return console.error("Error saving result:",e)})},S=function(e){c.imageModal&&c.modalImage&&(c.modalImage.src=e,c.imageModal.show())},x=function(e,t,n){var r=Number(n)-1;t.isCorrect&&(r=t.selectedIdx);var o=document.getElementById("answers-list-".concat(e));if(o){var a=o.children.length;if(Number.isNaN(r)||r<0||r>=a)return void _(e,t.selectedIdx,t.selectedIdx,!0)}_(e,t.selectedIdx,r,t.isCorrect)},_=function(e,t,n,r){var o=document.getElementById("answers-list-".concat(e));if(o){var a=o.children;r||a[n]||(console.warn("Question ".concat(e,": Marked wrong but correctIdx ").concat(n," is invalid. Treating as correct.")),r=!0,n=t),a[n]&&(a[n].classList.add("correct"),a[n].querySelector(".status-icon").classList.add("fa-circle-check")),r||a[t]&&(a[t].classList.add("wrong"),a[t].querySelector(".status-icon").classList.add("fa-circle-xmark")),Array.from(a).forEach(function(e){e.classList.add("disabled")})}},k=function(e,t,n){if(!r[e]){var a=Number(n)-1,i=document.getElementById("answers-list-".concat(e)),s=!1;if(i){var c=i.children.length;(Number.isNaN(a)||a<0||a>=c)&&(console.warn("Question ".concat(e,": Invalid correctAnswerIndex ").concat(n," for ").concat(c," options. Defaulting to user selection.")),s=!0)}var l=!!s||t===a;s&&(a=t),r[e]={selectedIdx:t,isCorrect:l},m(r),_(e,t,a,l),o>0&&Object.keys(r).length===o&&I()}},T=function(e,t){c.container.innerHTML="",0!==e.length?e.forEach(function(e,n){var o=t+n,a=document.createElement("div");a.className="question-item animate__animated animate__fadeIn",a.id="question-".concat(o);var i="";if(e.files&&e.files.length>0){var s=e.files[0],l="/images/questions/large/".concat(s.name,".").concat(s.ext);i='\n                    <div class="question-image-wrapper">\n                        <img src="'.concat(l,'" alt="Question Image">\n                    </div>\n                ')}var u=[];if("string"==typeof e.options)try{u=JSON.parse(e.options)}catch(e){u=[]}else u=e.options||[];var d='<div class="answers-list" id="answers-list-'+o+'">';u.forEach(function(t,n){d+='\n                    <div class="answer-option" \n                         data-global-index="'.concat(o,'" \n                         data-opt-idx="').concat(n,'" \n                         data-correct-idx="').concat(e.correctAnswerIndex,'" \n                         id="opt-').concat(o,"-").concat(n,'">\n                        <div class="radio-circle"></div>\n                        <div class="answer-text">').concat(t,'</div>\n                        <i class="status-icon fa-solid"></i>\n                    </div>\n                ')}),d+="</div>",a.innerHTML='\n                <div class="question-number">Հարց '.concat(o+1,"</div>\n                ").concat(i,'\n                <div class="question-text"><h2>').concat(e.question,"</h2></div>\n                ").concat(d,"\n            "),c.container.appendChild(a),r[o]&&x(o,r[o],e.correctAnswerIndex)}):c.container.innerHTML='<div class="alert alert-info">Այս էջում հարցեր չկան:</div>'},E=function(){return(E=_asyncToGenerator(_regenerator().m(function e(t){var i,s,l,u,d,f,p;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return c.container.innerHTML='\n            <div class="text-center py-5">\n                <div class="spinner-border text-primary" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                </div>\n                <p class="mt-3 text-muted">Հարցերի բեռնում...</p>\n            </div>\n        ',e.p=1,e.n=2,fetch("/api/v1/groups/".concat(n.id,"/questions?page=").concat(t,"&limit=").concat(a));case 2:if((i=e.v).ok){e.n=3;break}throw new Error("Network response was not ok");case 3:return e.n=4,i.json();case 4:if("success"!==(s=e.v).status){e.n=5;break}l=s.data,u=l.total,d=l.questions,o=u,u>0&&Object.keys(r).length>=u&&(console.log("Test was fully completed previously, resetting for fresh start."),r={},m({})),h(u,a,t),c.totalCountBadge&&(c.totalCountBadge.innerText="Ընդհանուր: ".concat(u," հարց")),T(d,(t-1)*a),(f=document.querySelector(".test-header-card"))&&f.scrollIntoView({behavior:"smooth"}),e.n=6;break;case 5:throw new Error(s.message||"Unknown error");case 6:e.n=8;break;case 7:e.p=7,p=e.v,c.container.innerHTML='<div class="alert alert-danger">Սխալ: '.concat(p.message,"</div>");case 8:return e.a(2)}},e,null,[[1,7]])}))).apply(this,arguments)},L=function(e){return E.apply(this,arguments)},b=function(){return(b=_asyncToGenerator(_regenerator().m(function e(){var t,n;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({});case 1:e.n=3;break;case 2:e.p=2,n=e.v,console.error("Error clearing progress:",n);case 3:(t=new URL(window.location)).searchParams.delete("retry"),t.searchParams.set("page",1),window.location.href=t.toString();case 4:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)},w=function(){return b.apply(this,arguments)},y=function(e){var t=new URL(window.location);t.searchParams.set("page",e),history.replaceState({},"",t),L(e)},h=function(e,t,n){var r=c.pagination;if(r){r.innerHTML="";var o=Math.ceil(e/t);if(!(o<=0)){var a=document.createElement("div");a.className="pagination-nav";var i=document.createElement("ul");i.className="pagination justify-content-center flex-wrap";var s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=document.createElement("li");o.className="page-item ".concat(n?"active":""," ").concat(r?"disabled":"");var a=document.createElement("a");a.className="page-link",a.innerHTML=t,a.href="#",r||n||(a.onclick=function(t){t.preventDefault(),y(e)}),o.appendChild(a),i.appendChild(o)};if(s(n-1,'<i class="fa-solid fa-chevron-left"></i>',!1,1===n),o<=7)for(var l=1;l<=o;l++)s(l,l,l===n);else{s(1,1,1===n),n>3&&s(null,"...",!1,!0);var u=Math.max(2,n-1),d=Math.min(o-1,n+1);n<=3&&(d=4),n>=o-2&&(u=o-3);for(var f=u;f<=d;f++)s(f,f,f===n);n<o-2&&s(null,"...",!1,!0),s(o,o,o===n)}s(n+1,'<i class="fa-solid fa-chevron-right"></i>',!1,n===o),a.appendChild(i),r.appendChild(a),r.style.display="flex"}}},g=function(){return(g=_asyncToGenerator(_regenerator().m(function e(){var t,r,o;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/api/v1/groups/".concat(n.id,"/progress"));case 1:return t=e.v,e.n=2,t.json();case 2:if("success"!==(r=e.v).status||!r.answers){e.n=3;break}return e.a(2,r.answers);case 3:e.n=5;break;case 4:e.p=4,o=e.v,console.error("Error loading progress from DB",o);case 5:return e.a(2,{})}},e,null,[[0,4]])}))).apply(this,arguments)},v=function(){return g.apply(this,arguments)},p=function(){return(p=_asyncToGenerator(_regenerator().m(function e(t){var r,o;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/api/v1/groups/".concat(n.id,"/progress"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:t})});case 1:if((r=e.v).ok){e.n=2;break}return console.error("Failed to save progress:",r.status),e.a(2,!1);case 2:return e.a(2,!0);case 3:return e.p=3,o=e.v,console.error("Error saving progress to DB",o),e.a(2,!1)}},e,null,[[0,3]])}))).apply(this,arguments)},m=function(e){return p.apply(this,arguments)},f=function(){return f=_asyncToGenerator(_regenerator().m(function e(){var t,n,o,a,i=arguments;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:null,n=i.length>1&&void 0!==i[1]?i[1]:"",e.p=1,r={},e.n=2,m({});case 2:e.v?((o=new URL(window.location)).searchParams.set("page",1),window.location.href=o.toString()):(showNotification("Սխալ տեղի ունեցավ: Չհաջողվեց ջնջել տվյալները:","error"),t&&(t.innerHTML=n,t.disabled=!1,c.resetConfirmModal&&c.resetConfirmModal.hide())),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Error resetting progress",a),showNotification("Սխալ տեղի ունեցավ","error"),t&&(t.innerHTML=n,t.disabled=!1,c.resetConfirmModal&&c.resetConfirmModal.hide());case 4:return e.a(2)}},e,null,[[1,3]])})),f.apply(this,arguments)},d=function(){return f.apply(this,arguments)},u=function(){return(u=_asyncToGenerator(_regenerator().m(function e(){var t,n,o;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=new URLSearchParams(window.location.search),e.n=1,v();case 1:return r=e.v,(n=t.get("limit"))&&(a=parseInt(n),c.limitSelect&&(c.limitSelect.value=a)),o=parseInt(t.get("page"))||1,e.n=2,L(o);case 2:e.n=4;break;case 3:e.p=3,showNotification("Սխալ տեղի ունեցավ էջը բեռնելիս: "+e.v.message,"error");case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)},l=function(){return u.apply(this,arguments)},t=document.getElementById("groupRoot")){e.n=1;break}return e.a(2);case 1:n={},e.p=2,n=JSON.parse(t.dataset.group),e.n=4;break;case 3:return e.p=3,e.v,e.a(2);case 4:if(n&&n.id){e.n=5;break}return e.a(2);case 5:r={},o=0,a=20,i=Date.now(),s=t.dataset.userId||"guest","mg_user_".concat(s,"_group_").concat(n.id,"_answers"),(c={container:document.getElementById("questions-container"),totalCountBadge:document.getElementById("totalCountBadge"),resultModal:"undefined"!=typeof bootstrap?new bootstrap.Modal(document.getElementById("resultModal")):null,correctCount:document.getElementById("correctCount"),wrongCount:document.getElementById("wrongCount"),timeSpentBadge:document.getElementById("timeSpentBadge"),scorePercent:document.getElementById("scorePercent"),limitSelect:document.getElementById("limitSelect"),pagination:document.getElementById("questionsPag"),btnRetry:document.getElementById("btnRetry"),resetProgressBtn:document.getElementById("resetProgressBtn"),resetConfirmModal:"undefined"!=typeof bootstrap?new bootstrap.Modal(document.getElementById("resetConfirmModal")):null,confirmResetBtnAction:document.getElementById("confirmResetBtnAction")}).btnRetry&&c.btnRetry.addEventListener("click",w),c.resetProgressBtn&&c.resetProgressBtn.addEventListener("click",function(){c.resetConfirmModal?c.resetConfirmModal.show():confirm("Ցանկանու՞մ եք սկսել նորից: Բոլոր պատասխանները կջնջվեն:")&&d()}),c.confirmResetBtnAction&&c.confirmResetBtnAction.addEventListener("click",_asyncToGenerator(_regenerator().m(function e(){var t,n;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return t=c.confirmResetBtnAction,n=t.innerHTML,t.innerHTML='<span class="spinner-border spinner-border-sm"></span>',t.disabled=!0,e.n=1,d(t,n);case 1:return e.a(2)}},e)}))),c.limitSelect&&c.limitSelect.addEventListener("change",function(e){a=Number(e.target.value);var t=new URL(window.location);t.searchParams.set("limit",a),t.searchParams.set("page",1),history.replaceState({},"",t),L(1)}),c.container&&c.container.addEventListener("click",function(e){var t=e.target.closest(".answer-option");if(!t||t.classList.contains("disabled")){var n=e.target.closest(".question-image-wrapper");if(n){var r=n.querySelector("img");r&&S(r.src)}}else{var o=parseInt(t.dataset.globalIndex),a=parseInt(t.dataset.optIdx),i=parseInt(t.dataset.correctIdx);k(o,a,i)}}),l();case 6:return e.a(2)}},e,null,[[2,3]])}))),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".filter-btn"),t=document.querySelectorAll(".test-card");e.forEach(function(n){n.addEventListener("click",function(){e.forEach(function(e){return e.classList.remove("active")}),n.classList.add("active");var r=n.getAttribute("data-filter");t.forEach(function(e){var t=e.closest(".group-col");t&&("all"===r||e.dataset.status===r?t.style.display="":t.style.display="none")})})});var n=document.getElementById("resetGroupsBtn");n&&n.addEventListener("click",_asyncToGenerator(_regenerator().m(function e(){var t,n;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,showModalConfirm({title:"Զրոյացնել արդյունքները",message:"Վստա՞հ եք, որ ցանկանում եք զրոյացնել ԽՄԲԵՐԻ բոլոր արդյունքները։ Այս գործողությունը անդարձելի է։",confirmText:"Զրոյացնել",cancelText:"Չեղարկել"});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.p=2,e.n=3,fetch("/api/v1/user/reset-groups",{method:"POST"});case 3:return t=e.v,e.n=4,t.json();case 4:"success"===(n=e.v).status?(showNotification(n.message||"Խմբերի արդյունքները զրոյացվեցին","success"),setTimeout(function(){return window.location.reload()},1e3)):showNotification(n.message||"Սխալ տեղի ունեցավ","error"),e.n=6;break;case 5:e.p=5,e.v,showNotification("Սերվերի սխալ","error");case 6:return e.a(2)}},e,null,[[2,5]])})))}),document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;document.querySelectorAll(".navbar-nav .nav-link").forEach(function(t){var n=t.getAttribute("href");t.classList.remove("active"),(n===e||"/"!==n&&"#"!==n&&e.startsWith(n))&&t.classList.add("active")})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".mobile_navigation .nav-item"),t=document.querySelector(".mobile_navigation .nav-indicator");function n(e){var n=e.offsetLeft+e.offsetWidth/2-25;t.style.left="".concat(n,"px")}var r=window.location.pathname;e.forEach(function(t){var n=t.getAttribute("href");(n===r||"/"!==n&&r.startsWith(n))&&(e.forEach(function(e){return e.classList.remove("active")}),t.classList.add("active"))});var o=document.querySelector(".mobile_navigation .nav-item.active");o&&(t.style.transition="none",n(o),requestAnimationFrame(function(){t.style.opacity="1",setTimeout(function(){t.style.transition=""},100)})),e.forEach(function(t){t.addEventListener("click",function(r){if(t.hasAttribute("data-bs-toggle"))"A"===t.tagName&&r.preventDefault();else{r.preventDefault();var o=t.getAttribute("href");e.forEach(function(e){return e.classList.remove("active")}),t.classList.add("active"),n(t),setTimeout(function(){window.location.href=o},1e3)}})}),window.addEventListener("resize",function(){var e=document.querySelector(".mobile_navigation .nav-item.active");e&&n(e)})});var NotificationManager=function(){return _createClass(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,e),this.container=t?document.querySelector(t):null,this.max=5,this.confirmOpen=!1,this.init()},[{key:"init",value:function(){this.container||(this.container=document.createElement("div"),this.container.className="notification-container",document.body.appendChild(this.container))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;("number"!=typeof r||isNaN(r))&&(r=5e3);var o="fa-circle-info";"success"===n?o="fa-circle-check":"danger"===n||"error"===n?o="fa-circle-exclamation":"warning"===n&&(o="fa-triangle-exclamation");var a=document.createElement("div");a.className="notification notification-".concat(n),a.style.zIndex="9999",a.innerHTML='\n            <div class="notification-content">\n                <i class="fa-solid '.concat(o,' notification-icon"></i>\n                <span class="notification-message">').concat(e,'</span>\n                <button class="notification-close">&times;</button>\n            </div>\n            <div class="notification-progress"></div>\n        '),a.querySelector(".notification-close").addEventListener("click",function(){t.hide(a)});var i=this.container.children.length,s=Math.max(0,r+400*i),c=a.querySelector(".notification-progress");c&&(c.style.animationName="notificationProgress",c.style.animationDuration="".concat(s,"ms"),c.style.animationTimingFunction="linear",c.style.animationFillMode="forwards");var l=setTimeout(function(){return t.hide(a)},s);for(a.addEventListener("transitionend",function(){!a.classList.contains("show")&&a.parentElement&&(a.parentElement.removeChild(a),clearTimeout(l))});this.container.children.length>=this.max;)this.container.firstElementChild&&this.container.removeChild(this.container.firstElementChild);this.container.appendChild(a),requestAnimationFrame(function(){return a.classList.add("show")})}},{key:"hide",value:function(e){e.classList.remove("show"),setTimeout(function(){e&&e.parentElement&&!e.classList.contains("show")&&e.parentElement.removeChild(e)},350)}},{key:"confirm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,r=void 0===n?"Հաստատում":n,o=t.message,a=void 0===o?"":o,i=t.confirmText,s=void 0===i?"Այո":i,c=t.cancelText,l=void 0===c?"Չեղարկել":c,u=t.timeout,d=void 0===u?0:u;return this.confirmOpen?Promise.resolve(!1):(this.confirmOpen=!0,new Promise(function(t){var n=document.createElement("div");n.className="notification notification-confirm",n.style.zIndex="9999",n.innerHTML='\n                <div class="notification-content">\n                    <div class="notification-title">'.concat(r,'</div>\n                    <div class="notification-message">').concat(a,'</div>\n                    <div class="notification-actions">\n                        <button class="btn btn-sm btn-secondary notification-cancel">').concat(l,'</button>\n                        <button class="btn btn-sm btn-primary notification-confirm-btn">').concat(s,"</button>\n                    </div>\n                </div>\n            ");var o,i=function(){e.confirmOpen=!1,e.hide(n)};for(d&&d>0&&(o=setTimeout(function(){t(!1),i()},d)),n.querySelector(".notification-cancel").addEventListener("click",function(){o&&clearTimeout(o),t(!1),i()}),n.querySelector(".notification-confirm-btn").addEventListener("click",function(){o&&clearTimeout(o),t(!0),i()});e.container.children.length>=e.max;)e.container.firstElementChild&&e.container.removeChild(e.container.firstElementChild);e.container.appendChild(n),requestAnimationFrame(function(){return n.classList.add("show")})}))}}])}(),notifications=new NotificationManager;function showNotification(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;notifications.show(e,t,n)}function showConfirm(e){return notifications.confirm(e)}function showModalConfirm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"Հաստատում":t,r=e.message,o=void 0===r?"":r,a=e.confirmText,i=void 0===a?"Այո":a,s=e.cancelText,c=void 0===s?"Չեղարկել":s;return new Promise(function(e){if(notifications.confirmOpen)return e(!1);notifications.confirmOpen=!0;var t=document.createElement("div");t.className="confirm-modal-overlay";var r=document.createElement("div");r.className="confirm-modal",r.innerHTML='\n            <div class="confirm-header">'.concat(n,'</div>\n            <div class="confirm-body">').concat(o,'</div>\n            <div class="confirm-actions">\n                <button class="btn btn-sm text-white btn-danger confirm-cancel">').concat(c,'</button>\n                <button class="btn btn-sm text-white btn-success confirm-ok">').concat(i,"</button>\n            </div>\n        "),t.appendChild(r),document.body.appendChild(t),requestAnimationFrame(function(){requestAnimationFrame(function(){t.classList.add("open")})});var a=function(){notifications.confirmOpen=!1,t.classList.remove("open");var e=function(){t&&t.parentElement&&t.parentElement.removeChild(t)};t.addEventListener("transitionend",e,{once:!0}),setTimeout(e,400)};r.querySelector(".confirm-cancel").addEventListener("click",function(){e(!1),a()}),r.querySelector(".confirm-ok").addEventListener("click",function(){e(!0),a()}),t.addEventListener("click",function(n){n.target===t&&(e(!1),a())}),document.addEventListener("keydown",function t(n){"Escape"===n.key&&(document.removeEventListener("keydown",t),e(!1),a())})})}var PaginationManager=function(){return _createClass(function e(t){var n=t.container,r=t.itemsPerPage,o=void 0===r?30:r,a=t.urlParam,i=void 0===a?"page":a;_classCallCheck(this,e),this.container=n,this.itemsPerPage=o,this.urlParam=i;var s=new URLSearchParams(location.search);this.currentPage=parseInt(s.get(this.urlParam))||1,this.totalItems=0,this.onPageChange=function(){}},[{key:"setTotal",value:function(e){this.totalItems=e}},{key:"setPage",value:function(e){e!==this.currentPage&&(this.currentPage=e,this._writeURL(e),this.onPageChange(e))}},{key:"totalPages",get:function(){return Math.ceil(this.totalItems/this.itemsPerPage)}},{key:"_writeURL",value:function(e){var t=new URL(window.location);e>1?t.searchParams.set(this.urlParam,e):t.searchParams.delete(this.urlParam),history.replaceState({},"",t)}},{key:"render",value:function(){var e=this;if(this.container){var t=this.totalPages;if(0===t)return this.currentPage=1,void(this.container.innerHTML="");if(this.currentPage>t&&(this.currentPage=t),this.currentPage<1&&(this.currentPage=1),this.container.innerHTML="",!(t<=1)){var n=document.createElement("nav"),r=document.createElement("ul");r.className="pagination justify-content-center";var o=function(t,n,o){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("li");i.className="page-item ".concat(o?"disabled":""," ").concat(a?"active":"");var s=document.createElement("button");s.className="page-link",s.innerHTML=t,o||a||(s.onclick=function(t){t.preventDefault(),e.setPage(n),e.render()}),i.appendChild(s),r.appendChild(i)},a=function(){var e=document.createElement("li");e.className="page-item disabled",e.innerHTML='<span class="page-link">...</span>',r.appendChild(e)};o('<i class="bi bi-chevron-left"></i>',this.currentPage-1,1===this.currentPage);if(t<=7)for(var i=1;i<=t;i++)o(i,i,!1,i===this.currentPage);else{o(1,1,!1,1===this.currentPage),this.currentPage>3&&a();var s=Math.max(2,this.currentPage-1),c=Math.min(t-1,this.currentPage+1);this.currentPage<=3&&(c=4),this.currentPage>=t-2&&(s=t-3);for(var l=s;l<=c;l++)o(l,l,!1,l===this.currentPage);this.currentPage<t-2&&a(),o(t,t,!1,t===this.currentPage)}o('<i class="bi bi-chevron-right"></i>',this.currentPage+1,this.currentPage===t),n.appendChild(r),this.container.appendChild(n)}}}}])}(),Questions=function(){return _createClass(function e(t,n){_classCallCheck(this,e),this.object=t,this.container=document.querySelector(n),this.correctAnswers=t.map(function(e){return e.correctAnswerIndex}),this.answeredQuestions=new Set,this.score=0,this.resultBox=document.createElement("div"),this.resultBox.id="resultBox",this.init()},[{key:"generateAnswer",value:function(e,t,n){return'\n            <li class="question_answer" data-question="'.concat(n,'" data-index="').concat(t,'">\n              <span class="count">0').concat(t+1,"</span> ").concat(e,"\n            </li>")}},{key:"renderQuestionCard",value:function(e,t){var n=this,r="";this.parseOptions(e.options).forEach(function(e,o){r+=n.generateAnswer(e,o,t)});var o=t+1,a={img:""};if(e.files){var i=e.files.find(function(e){return"question_img"===e.name_used});a=i?{img:"/client/images/questions/large/".concat(i.name,".").concat(i.ext)}:{img:"/client/images/404.jpg"}}return'\n            <div class="questionCard">\n              <div class="badge">'.concat(o<10?"0"+o:o,'</div>\n              <div class="image" id="lightgallery">\n                <a href="').concat(a.img,'" class="gallery_item scroll_animate">\n                    <img src="').concat(a.img,'" />\n                </a>\n              </div>\n              <div class="card_body">\n                <h3 class="title">').concat(e.question,'</h3>\n                <ul class="question_answers">').concat(r,"</ul>\n              </div>\n            </div>")}},{key:"parseOptions",value:function(e){try{return"string"==typeof e?JSON.parse(e):e}catch(e){return[]}}},{key:"renderQuestions",value:function(){var e=this;this.container.innerHTML="",this.object.forEach(function(t,n){e.container.innerHTML+=e.renderQuestionCard(t,n)}),this.container&&this.container.appendChild(this.resultBox)}},{key:"handleClicks",value:function(){var e=this;document.querySelectorAll(".question_answer").forEach(function(t){t.addEventListener("click",function(){var n=parseInt(t.dataset.question),r=parseInt(t.dataset.index),o=e.correctAnswers[n],a=t.parentElement.querySelectorAll(".question_answer");e.answeredQuestions.has(n)||(a.forEach(function(e,t){e.style.pointerEvents="none",t===o&&(e.style.backgroundColor="#d4edda",e.style.color="#155724"),t===r&&r!==o&&(e.style.backgroundColor="#f8d7da",e.style.color="#721c24")}),e.answeredQuestions.add(n),r===o&&e.score++,e.answeredQuestions.size===e.object.length&&(e.resultBox.innerHTML='\n                        <div class="result">\n                          <i class="fa-solid fa-circle-check" style="font-size: 20px; color: #00DE3B"></i> \n                          Դու պատասխանել ես '.concat(e.object.length,"-ից <strong>").concat(e.score,"</strong> ճիշտ հարցի։\n                        </div>")))})})}},{key:"init",value:function(){this.container&&(this.renderQuestions(),this.handleClicks())}}])}(),selectQuestionTest=document.querySelector("#select_tests"),selectQuestionGroup=document.querySelector("#select_groups");function handleSelectChange(e){return _handleSelectChange.apply(this,arguments)}function _handleSelectChange(){return(_handleSelectChange=_asyncToGenerator(_regenerator().m(function e(t){var n,r,o,a;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(n=t.target.value,"selected_test"!==(r=t.target.name)){e.n=3;break}if("*"!==n){e.n=1;break}return new Questions([],".tests_page .question_card"),e.a(2);case 1:return e.n=2,doAxios("/api/v1/tests/".concat(n));case 2:o=e.v,new Questions(o.data.tests.questions,".tests_page .question_card"),e.n=6;break;case 3:if("selected_groups"!==r){e.n=6;break}if("*"!==n){e.n=4;break}return new Questions([],".groups_page .question_card"),e.a(2);case 4:return e.n=5,doAxios("/api/v1/groups/".concat(n));case 5:a=e.v,new Questions(a.data.group.questions,".groups_page .question_card");case 6:return e.a(2)}},e)}))).apply(this,arguments)}function validateBootstrap(e){var t=!0;return e.querySelectorAll("input, textarea").forEach(function(e){e.value=e.value.trim(),e.checkValidity()||(t=!1)}),e.checkValidity()||(t=!1),e.classList.add("was-validated"),t}function doAxios(e){return _doAxios.apply(this,arguments)}function _doAxios(){return _doAxios=_asyncToGenerator(_regenerator().m(function e(t){var n,r,o,a,i,s,c=arguments;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"GET",r=c.length>2&&void 0!==c[2]?c[2]:{},e.p=1,e.n=2,axios({url:t,method:n,data:r,headers:{"Content-Type":"multipart/form-data"}});case 2:return a=e.v,e.a(2,{success:!0,status:a.status,data:a.data,error:!1,message:(null===(o=a.data)||void 0===o?void 0:o.message)||"Հաջողությամբ ստացվեց։"});case 3:if(e.p=3,!(s=e.v).response){e.n=4;break}return e.a(2,{success:!1,status:s.response.status,data:null,error:!0,message:(null===(i=s.response.data)||void 0===i?void 0:i.message)||"Սերվերից սխալ է ստացվել"});case 4:return e.a(2,{success:!1,status:null,data:null,error:!0,message:s.message||"Ցանցի կամ անհայտ սխալ"})}},e,null,[[1,3]])})),_doAxios.apply(this,arguments)}function handlerNotify(e,t){showNotification(e,t,5e3)}function setFormLoading(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.querySelector('button[type="submit"]');n&&(n.disabled=t)}function setupNavLinks(){document.querySelectorAll("a[data-section]").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.getAttribute("data-section");if("/"===window.location.pathname||"/"===window.location.pathname){var r=document.querySelector("#".concat(n));r&&r.scrollIntoView({behavior:"smooth"})}else window.location.href="/".concat(n?"#"+n:"")})})}function exposePass(){var e=document.getElementById("xPassword");"password"===e.type?e.type="text":e.type="password"}function capLock(e){kc=e.keyCode?e.keyCode:e.which,sk=e.shiftKey?e.shiftKey:16==kc,kc>=65&&kc<=90&&!sk||kc>=97&&kc<=122&&sk?document.getElementById("capsOn").style.visibility="visible":document.getElementById("capsOn").style.visibility="hidden"}function initPasswordToggle(){document.querySelectorAll(".input_field").forEach(function(e){var t=e.querySelector('input[type="password"]');if(t){var n=document.createElement("button");n.type="button",n.classList.add("password-show"),n.innerHTML='<i class="fa-solid fa-eye-slash"></i>',n.addEventListener("click",function(){"password"===t.type?(t.type="text",n.innerHTML='<i class="fa-solid fa-eye"></i>'):(t.type="password",n.innerHTML='<i class="fa-solid fa-eye-slash"></i>')}),e.appendChild(n)}})}function changeProfileImage(){document.querySelectorAll('input[name="user_img"]').forEach(function(e){e.addEventListener("change",function(){var e=_asyncToGenerator(_regenerator().m(function e(t){var n,r,o,a,i,s;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=this.files&&this.files[0]){e.n=1;break}return e.a(2);case 1:if(r=!!document.querySelector("[data-crop-wrapper]"),o="1"===this.dataset.cropped,!r||o){e.n=2;break}return e.a(2);case 2:return a=document.querySelector(".profile-img"),i=document.querySelector(".profime-sm-image"),a&&(a.src=URL.createObjectURL(n)),i&&(i.src=URL.createObjectURL(n)),(s=new FormData).append("user_img",n),e.p=3,e.n=4,doAxios("/api/v1/user/updateme","patch",s);case 4:400===e.v.status&&(a&&(a.src="./client/images/no-image-profile.jpg"),i&&(i.src="./client/images/no-image-profile.jpg")),this.dataset.cropped="",e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,this,[[3,5]])}));return function(t){return e.apply(this,arguments)}}())})}function setupReviewForm(){var e=document.getElementById("reviewForm");if(e){var t=document.getElementById("reviewSubmitBtn");t&&(e.addEventListener("submit",function(e){return e.preventDefault()}),t.addEventListener("click",_asyncToGenerator(_regenerator().m(function t(){var n,r,o;return _regenerator().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=new FormData(e),"1"!==e.dataset.hasReview){t.n=1;break}return showNotification("Դուք արդեն մեկնաբանություն թողել եք","warning",3e3),t.a(2);case 1:if(n.get("rating")){t.n=2;break}return showNotification("Ընտրեք գնահատականը (աստղերը)","warning",3e3),t.a(2);case 2:if(String(n.get("comment")||"").trim()){t.n=3;break}return showNotification("Գրեք մեկնաբանության տեքստը","warning",3e3),(r=e.querySelector('[name="comment"]'))&&r.focus(),t.a(2);case 3:return t.n=4,showModalConfirm({title:"Հաստատում",message:"Ձեր մեկնաբանությունը ենթակա չէ փոփոխման։ Շարունակե՞լ",confirmText:"Այո, ուղարկել",cancelText:"Չեղարկել"});case 4:if(t.v){t.n=5;break}return t.a(2);case 5:return setFormLoading(e,!0),t.p=6,t.n=7,doAxios("/api/v1/review","post",n);case 7:(o=t.v)&&o.success?(showNotification("Շնորհակալություն ձեր կարծիքի համար!","success",3e3),e.reset(),e.dataset.hasReview="1",setTimeout(function(){return window.location.reload()},500)):showNotification((null==o?void 0:o.message)||"Սխալ փորձի ժամանակ","error",3e3),t.n=9;break;case 8:t.p=8,t.v,showNotification("Չհաջողվեց ուղարկել","error",3e3);case 9:return t.p=9,setFormLoading(e,!1),t.f(9);case 10:return t.a(2)}},t,null,[[6,8,9,10]])}))))}}_asyncToGenerator(_regenerator().m(function e(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!selectQuestionTest){e.n=2;break}return e.n=1,doAxios("/api/v1/tests");case 1:e.v.data.tests.forEach(function(e){selectQuestionTest.innerHTML+='<option value="'.concat(e.id,'">').concat(e.title,"-").concat(e.number,"</option>")});case 2:if(!selectQuestionGroup){e.n=4;break}return e.n=3,doAxios("/api/v1/groups");case 3:e.v.data.groups.forEach(function(e){selectQuestionGroup.innerHTML+='<option value="'.concat(e.id,'">').concat(e.slug,"</option>")});case 4:return e.a(2)}},e)}))(),selectQuestionTest&&selectQuestionTest.addEventListener("change",handleSelectChange),selectQuestionGroup&&selectQuestionGroup.addEventListener("change",handleSelectChange),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("resetPasswordForm");if(e){var t=e.dataset.token,n=document.getElementById("togglePassword"),r=document.getElementById("password");n&&r&&n.addEventListener("click",function(){var e="password"===r.getAttribute("type")?"text":"password";r.setAttribute("type",e),this.querySelector("i").classList.toggle("fa-eye"),this.querySelector("i").classList.toggle("fa-eye-slash")}),e.addEventListener("submit",function(){var n=_asyncToGenerator(_regenerator().m(function n(r){var o,a,i,s,c,l;return _regenerator().w(function(n){for(;;)switch(n.p=n.n){case 0:if(r.preventDefault(),e.checkValidity()){n.n=1;break}return r.stopPropagation(),e.classList.add("was-validated"),n.a(2);case 1:if(o=document.getElementById("password").value,a=document.getElementById("passwordConfirm").value,o===a){n.n=2;break}return showNotification("Գաղտնաբառերը չեն համընկնում","error"),n.a(2);case 2:return n.p=2,i=e.querySelector('button[type="submit"]'),s=i.innerHTML,i.disabled=!0,i.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Կատարվում է...',n.n=3,doAxios("/api/v1/user/resetPassword/".concat(t),"POST",{password:o});case 3:(c=n.v).success?(showNotification("Գաղտնաբառը հաջողությամբ փոխվեց","success"),setTimeout(function(){window.location.href="/"},1500)):(showNotification(c.message||"Սխալ տեղի ունեցավ","error"),i.disabled=!1,i.innerHTML=s),n.n=5;break;case 4:n.p=4,n.v,showNotification("Սխալ տեղի ունեցավ","error"),(l=e.querySelector('button[type="submit"]')).disabled=!1,l.innerHTML="Պահպանել գաղտնաբառը";case 5:return n.a(2)}},n,null,[[2,4]])}));return function(e){return n.apply(this,arguments)}}())}}),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".reviews-swiper")&&new Swiper(".reviews-swiper",{slidesPerView:1,spaceBetween:20,loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:3}}}),document.querySelectorAll(".review-progress-bar").forEach(function(e){var t=e.getAttribute("data-width");t&&setTimeout(function(){e.style.width=t+"%"},100)})}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("testRoot");if(e){var t={};try{t=JSON.parse(e.dataset.test||"{}")}catch(e){}var n=t.questions||[];if(0!==n.length){var r,o=0,a=new Array(n.length).fill(null),i=1800,s=Date.now(),c={testTitle:document.getElementById("testTitle"),timer:document.getElementById("timer"),progressText:document.getElementById("progressText"),progressBar:document.getElementById("progressBar"),questionImage:document.getElementById("questionImage"),imageWrapper:document.getElementById("imageWrapper"),questionText:document.getElementById("questionText"),answersList:document.getElementById("answersList"),nextBtn:document.getElementById("nextBtn"),navGrid:document.getElementById("navGrid"),resultModal:"undefined"!=typeof bootstrap?new bootstrap.Modal(document.getElementById("resultModal")):null,correctCount:document.getElementById("correctCount"),wrongCount:document.getElementById("wrongCount"),timeSpentBadge:document.getElementById("timeSpentBadge"),scorePercent:document.getElementById("scorePercent")};c.nextBtn&&c.nextBtn.addEventListener("click",function(){if(o<n.length-1)d(o+1);else{if(a.every(function(e){return null!==e}))f();else{var e=a.findIndex(function(e){return null===e});-1!==e&&(showNotification("Խնդրում ենք պատասխանել բոլոր հարցերին ավարտելու համար:","warning"),d(e))}}}),c.zoomBtn&&c.zoomBtn.addEventListener("click",function(){c.imageModal&&c.imageModal.show()});var l=document.getElementById("btnRetry");l&&l.addEventListener("click",function(){location.reload()}),c.answersList&&c.answersList.addEventListener("click",function(e){var t=e.target.closest(".answer-option");t&&!t.classList.contains("disabled")&&function(e){if(null!==a[o])return;var t=n[o],r=Number(t.correctAnswerIndex)-1,i=0;c.answersList&&(i=c.answersList.children.length);var s=!1;(Number.isNaN(r)||r<0||r>=i)&&(console.warn("Question ".concat(o,": Invalid correctAnswerIndex ").concat(t.correctAnswerIndex,". Defaulting to user selection.")),s=!0);var l=!!s||e===r;s&&(r=e);a[o]={selectedIdx:e,isCorrect:l};var u=c.answersList.children;u[r]&&u[r].classList.add("correct");l||u[e]&&u[e].classList.add("wrong");Array.from(u).forEach(function(e){return e.classList.add("disabled")}),c.nextBtn&&(c.nextBtn.disabled=!1);m()}(parseInt(t.dataset.idx))}),c.navGrid&&c.navGrid.addEventListener("click",function(e){var t=e.target.closest(".nav-item");t&&d(parseInt(t.dataset.idx))}),u(),r=setInterval(function(){i--,u(),i<=0&&f(!0)},1e3),c.navGrid&&(c.navGrid.innerHTML="",n.forEach(function(e,t){var n=document.createElement("div");n.className="nav-item",n.innerText=t+1,n.dataset.idx=t,n.id="nav-item-".concat(t),c.navGrid.appendChild(n)})),d(0)}else showNotification("Այս թեստում հարցեր չկան","warning")}function u(){if(c.timer){var e=Math.floor(i/60).toString().padStart(2,"0"),t=(i%60).toString().padStart(2,"0");c.timer.innerText="".concat(e,":").concat(t)}}function d(e){o=e;var t=n[e];if(c.progressText&&(c.progressText.innerText="Հարց ".concat(e+1," / ").concat(n.length)),c.progressBar&&(c.progressBar.style.width="".concat((e+1)/n.length*100,"%")),c.questionText&&(c.questionText.innerText=t.question),c.imageWrapper&&c.questionImage){var r="/images/no-image.png";if(t.files&&t.files.length>0){var i=t.files[0];r="/images/questions/large/".concat(i.name,".").concat(i.ext)}c.questionImage.src=r,c.modalImage&&(c.modalImage.src=r),c.imageWrapper.style.display="block"}c.nextBtn&&(c.nextBtn.disabled=!0),function(e){if(!c.answersList)return;c.answersList.innerHTML="";var t=[];if("string"==typeof e.options)try{t=JSON.parse(e.options)}catch(e){t=[]}else t=e.options||[];var n=Number(e.correctAnswerIndex)-1;(Number.isNaN(n)||n<0||n>=t.length)&&(console.warn("Question ".concat(o,": Invalid correctAnswerIndex ").concat(e.correctAnswerIndex,".")),a[o]&&a[o].isCorrect&&(n=a[o].selectedIdx));t.forEach(function(e,t){var r=document.createElement("div");if(r.className="answer-option",r.dataset.idx=t,null!==a[o]){r.classList.add("disabled");var i=a[o].selectedIdx,s=a[o].isCorrect;t===n&&r.classList.add("correct"),s||t!==i||r.classList.add("wrong")}r.innerHTML='\n                <div class="radio-circle"></div>\n                <div class="answer-text">'.concat(e,'</div>\n                <i class="status-icon fa-solid ').concat(t===n?"fa-circle-check":"fa-circle-xmark",'"></i>\n            '),c.answersList.appendChild(r)}),null!==a[o]&&c.nextBtn&&(c.nextBtn.disabled=!1)}(t),m()}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearInterval(r);var o=a.filter(function(e){return e&&e.isCorrect}).length,i=a.filter(function(e){return e&&!e.isCorrect}).length,l="";if(e)l="Ժամանակը սպառվեց";else{var u=Date.now(),d=Math.floor((u-s)/1e3),f=Math.floor(d/60),m=d%60;l="".concat(f," րոպե ").concat(m," վայրկյանում")}var p=n.length,v=p>0?Math.round(o/p*100):0;c.correctCount&&(c.correctCount.innerText=o),c.wrongCount&&(c.wrongCount.innerText=i),c.timeSpentBadge&&(c.timeSpentBadge.innerText=l),e&&c.timeSpentBadge&&c.timeSpentBadge.classList.replace("bg-primary","bg-danger"),c.scorePercent&&(c.scorePercent.innerText=v);var g=document.getElementById("scoreCircle");g&&(g.className="score-circle mb-4",v>=90?g.classList.add("high"):v>=50?g.classList.add("medium"):g.classList.add("low")),c.resultModal&&c.resultModal.show();var h={testId:t.id,score:v,correct_count:o,wrong_count:i,time_spent:e?1800:Math.floor((Date.now()-s)/1e3),status:v>=90?"passed":"failed"};fetch("/api/v1/tests/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(function(e){return e.json()}).then(function(e){e.saved}).catch(function(e){})}function m(){c.navGrid&&n.forEach(function(e,t){var n=document.getElementById("nav-item-".concat(t));if(n){n.className="nav-item",t===o&&n.classList.add("current");var r=a[t];r&&n.classList.add(r.isCorrect?"correct":"wrong")}})}}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".filter-btn"),t=document.querySelectorAll(".test-card");e.forEach(function(n){n.addEventListener("click",function(){e.forEach(function(e){return e.classList.remove("active")}),n.classList.add("active");var r=n.getAttribute("data-filter");t.forEach(function(e){var t=e.closest(".test-col");t&&("all"===r||e.dataset.status===r?t.style.display="":t.style.display="none")})})});var n=document.getElementById("resetTestsBtn");n&&n.addEventListener("click",_asyncToGenerator(_regenerator().m(function e(){var t,n;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,showModalConfirm({title:"Զրոյացնել արդյունքները",message:"Վստա՞հ եք, որ ցանկանում եք զրոյացնել ԹԵՍՏԵՐԻ բոլոր արդյունքները։ Այս գործողությունը անդարձելի է։",confirmText:"Զրոյացնել",cancelText:"Չեղարկել"});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.p=2,e.n=3,fetch("/api/v1/user/reset-tests",{method:"POST"});case 3:return t=e.v,e.n=4,t.json();case 4:"success"===(n=e.v).status?(showNotification(n.message||"Թեստերի արդյունքները զրոյացվեցին","success"),setTimeout(function(){return window.location.reload()},1e3)):showNotification(n.message||"Սխալ տեղի ունեցավ","error"),e.n=6;break;case 5:e.p=5,e.v,showNotification("Սերվերի սխալ","error");case 6:return e.a(2)}},e,null,[[2,5]])})))}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".form-user-update");e&&e.addEventListener("submit",function(){var e=_asyncToGenerator(_regenerator().m(function e(t){var n,r,o,a,i;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),validateBootstrap(this)){e.n=1;break}return e.a(2);case 1:return n=this.querySelector('button[type="submit"]'),r=n.innerHTML,setFormLoading(this,!0),n.innerHTML="Պահպանվում է...",o=new FormData(this),a=Object.fromEntries(o.entries()),e.n=2,doAxios("/api/v1/user/updateme","PATCH",a);case 2:i=e.v,setFormLoading(this,!1),n.innerHTML=r,i.success?(handlerNotify("Տվյալները հաջողությամբ թարմացվեցին","success"),setTimeout(function(){return window.location.reload()},500)):handlerNotify(i.message||"Սխալ տեղի ունեցավ","danger");case 3:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}()),document.querySelectorAll(".form-password-update").forEach(function(e){e.addEventListener("submit",function(){var e=_asyncToGenerator(_regenerator().m(function e(t){var n,r,o,a,i,s,c;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),validateBootstrap(this)){e.n=1;break}return e.a(2);case 1:return n=this.querySelector('button[type="submit"]'),r=n.innerHTML,setFormLoading(this,!0),n.innerHTML="Խնդրում ենք սպասել...",o=new FormData(this),a=Object.fromEntries(o.entries()),e.n=2,doAxios("/api/v1/user/updateMyPassword","PATCH",a);case 2:i=e.v,setFormLoading(this,!1),n.innerHTML=r,i.success?(handlerNotify("Գաղտնաբառը հաջողությամբ թարմացվեց","success"),this.reset(),s=document.getElementById("changePasswordModal"),(c=bootstrap.Modal.getInstance(s))&&c.hide()):handlerNotify(i.message||"Սխալ տեղի ունեցավ","danger");case 3:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}())});var t=document.getElementById("payment-tab"),n=document.getElementById("overview-tab"),r=null;t&&n&&(t.addEventListener("shown.bs.tab",function(){r&&clearTimeout(r),r=setTimeout(function(){n.click()},12e4)}),document.querySelectorAll('[data-bs-toggle="tab"]').forEach(function(e){"payment-tab"!==e.id&&e.addEventListener("show.bs.tab",function(){r&&(clearTimeout(r),r=null)})}));var o=document.getElementById("profileReviewForm");if(o){var a=o.querySelector(".rating-stars"),i=o.querySelectorAll(".star-wrapper"),s=document.getElementById("ratingInput"),c=document.getElementById("ratingText");if(a){var l=0,u=function(e){i.forEach(function(t){var n=parseInt(t.dataset.value),r=t.querySelector(".fa-solid"),o=t.querySelector(".fa-regular");r&&o&&(n<=e?(r.classList.remove("d-none"),o.classList.add("d-none")):(r.classList.add("d-none"),o.classList.remove("d-none")))})};a.addEventListener("click",function(e){var t=e.target.closest(".star-wrapper");if(t){var n=parseInt(t.dataset.value);l=n,s.value=n,u(l),c.textContent="Գնահատական՝ ".concat(n,"/5"),c.classList.add("text-warning","fw-bold"),t.style.transform="scale(1.3)",setTimeout(function(){return t.style.transform="scale(1.2)"},200)}}),a.addEventListener("mouseover",function(e){var t=e.target.closest(".star-wrapper");if(t){var n=parseInt(t.dataset.value);u(n),i.forEach(function(e){parseInt(e.dataset.value)<=n?e.style.transform="scale(1.2)":e.style.transform="scale(1)"})}}),a.addEventListener("mouseout",function(e){u(l),i.forEach(function(e){return e.style.transform="scale(1)"})})}o.addEventListener("submit",function(){var e=_asyncToGenerator(_regenerator().m(function e(t){var n,r,o,a,i;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),s.value){e.n=1;break}return handlerNotify("Խնդրում ենք ընտրել գնահատականը (աստղերը)","warning"),e.a(2);case 1:return n=this.querySelector('button[type="submit"]'),r=n.innerHTML,setFormLoading(this,!0),n.innerHTML="Ուղարկվում է...",o=new FormData(this),a=Object.fromEntries(o.entries()),e.n=2,doAxios("/api/v1/review","POST",a);case 2:i=e.v,setFormLoading(this,!1),n.innerHTML=r,i.success?(handlerNotify("Շնորհակալություն ձեր կարծիքի համար","success"),setTimeout(function(){return window.location.reload()},1e3)):handlerNotify(i.message||"Սխալ տեղի ունեցավ","danger");case 3:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}),function(){var e=new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target;if(t.dataset.saInit||(t.style.willChange="transform, opacity",t.style.transition="transform 0.28s ease-out, opacity 0.28s ease-out",t.dataset.saInit="1"),e.isIntersecting){var n=Math.max(0,1-e.intersectionRatio);t.style.transform="translateY(".concat(80*n,"px)"),t.style.opacity=String(e.intersectionRatio)}else t.style.transform="translateY(80px)",t.style.opacity="0"})},{threshold:[0,.25,.5,.75,1]});document.querySelectorAll(".scroll_animate").forEach(function(t){t.style.transform="translateY(80px)",t.style.opacity="0",e.observe(t)})}(),document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(function(e){new bootstrap.Tooltip(e)})});var accordionCollapseElementList=document.querySelectorAll("#headingThree .collapse"),accordionCollapseList=_toConsumableArray(accordionCollapseElementList).map(function(e){return new bootstrap.Collapse(e)});function setupAuthModals(){var e=document.getElementById("signIn_signUp"),t=document.getElementById("forgotPasswordLink");e&&(t&&t.addEventListener("click",function(){var n=_asyncToGenerator(_regenerator().m(function n(r){var o,a,i,s,c,l,u;return _regenerator().w(function(n){for(;;)switch(n.p=n.n){case 0:if(r.preventDefault(),o=e.querySelector("form"),a=o?o.querySelector('input[name="email"]'):null){n.n=1;break}return showNotification("Էլ․ փոստի դաշտը չի գտնվել","warning",3e3),n.a(2);case 1:if(i=a.value.trim(),s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,i){n.n=2;break}return showNotification("Խնդրում ենք լրացնել էլ․ փոստը մուտքի դաշտում","warning",3e3),a.focus(),n.a(2);case 2:if(s.test(i)){n.n=3;break}return showNotification("Խնդրում ենք մուտքագրել վավեր էլ․ փոստ","warning",3e3),a.focus(),n.a(2);case 3:return n.p=3,t.style.pointerEvents="none",t.style.opacity="0.5",(c=new FormData).append("email",i),n.n=4,doAxios("/api/v1/user/forgotPassword","POST",c);case 4:(l=n.v).success?showNotification(l.message||"Հղումը ուղարկված է էլ․ փոստին","success",4e3):showNotification(l.message||"Սխալ տեղի ունեցավ","error",4e3),n.n=6;break;case 5:n.p=5,u=n.v,console.error(u),showNotification("Ցանցի սխալ","error",3e3);case 6:return n.p=6,t.style.pointerEvents="",t.style.opacity="",n.f(6);case 7:return n.a(2)}},n,null,[[3,5,6,7]])}));return function(e){return n.apply(this,arguments)}}()),e.addEventListener("hidden.bs.modal",function(){setTimeout(function(){document.querySelector(".modal.show")||(document.querySelectorAll(".modal-backdrop").forEach(function(e){return e.remove()}),document.body.classList.remove("modal-open"),document.body.style.paddingRight="",document.body.style.overflow="")},100)}))}setupAuthModals(),changeProfileImage(),setupReviewForm(),initPasswordToggle(),setupNavLinks();
//# sourceMappingURL=main.js.map
